## List Users

Add list component - just to display data

```tsx
import { Component, Prop } from '@stencil/core';

@Component({
	tag: 'user-list',
	styleUrl: 'user-list.scss'
})
export class UserList {
	@Prop() header: string;
	@Prop() users: firebase.firestore.DocumentData[];

	render() {
		return (
			<ion-list>
				<ion-list-header>{this.header}</ion-list-header>
				{this.users
					? this.users.map(user => (
							<ion-item>
								<ion-avatar>
									<img src={user.photoURL} alt={user.displayName} />
								</ion-avatar>
								<ion-label>
									<h2>{user.displayName}</h2>
									<p>{user.role}</p>
								</ion-label>
							</ion-item>
					  ))
					: undefined}
			</ion-list>
		);
	}
}

```

style avatar
```scss
user-list {
	ion-avatar {
		margin-right: 16px;
	}
}

```
Create a user service

```ts
export class UserService {

}
export const userSvc = new UserService()
```

getUsers fn

```tsx
import { collection, collectionData } from 'rxfire/firestore';
import { firestore } from '../firebase';
import { tap, map } from 'rxjs/operators';

	getcollection() {
		return collection(firestore.collection('users')).pipe(
			// returns data + metadata
			tap(data => console.log('before maping: ', data)),
			// we can map it to only needed data
			map(docs => docs.map(d => d.data())),
			tap(data => console.log('after mapping: ', data))
		);
	}

	getcollectionData() {
		// just like the above after mapping, only the data and id
		return collectionData(firestore.collection('users'), 'id');
	}

```

on component
```tsx
import { userSvc } from '../../services/user.service';

export class PageUserList {
	@State() users: firebase.firestore.DocumentData[];

	componentWillLoad() {
		userSvc.getcollection().subscribe(data => console.log('getcollection: ', data));
		userSvc.getcollectionData().subscribe(data => {
			console.log('getcollectionData: ', data);
			this.users = data;
		});
	}

	render() {
		return [
			<Navbar title='Home' />,
			<ion-content>
				<user-list header='User List' users={this.users} />
			</ion-content>
		];
	}
}

```

add route

```tsx
	<ion-route url='/users' component='page-user-list' />
```

try list rules for non authed users (use incognito)